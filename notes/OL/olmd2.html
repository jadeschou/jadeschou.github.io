<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JadeBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="这是我的第一个 VuePress 站点">
    
    <link rel="preload" href="/assets/css/0.styles.9825735b.css" as="style"><link rel="preload" href="/assets/js/app.d11e3cee.js" as="script"><link rel="preload" href="/assets/js/2.15dfde48.js" as="script"><link rel="preload" href="/assets/js/38.edd3e45b.js" as="script"><link rel="prefetch" href="/assets/js/10.1d6542d0.js"><link rel="prefetch" href="/assets/js/100.69c90d5b.js"><link rel="prefetch" href="/assets/js/101.80a1d206.js"><link rel="prefetch" href="/assets/js/102.39b57a31.js"><link rel="prefetch" href="/assets/js/103.f7c75e3a.js"><link rel="prefetch" href="/assets/js/104.b04e0e89.js"><link rel="prefetch" href="/assets/js/105.fdacd3c8.js"><link rel="prefetch" href="/assets/js/106.d37cb95e.js"><link rel="prefetch" href="/assets/js/107.34a0f5fd.js"><link rel="prefetch" href="/assets/js/108.89d967be.js"><link rel="prefetch" href="/assets/js/109.b5d4a332.js"><link rel="prefetch" href="/assets/js/11.8d74eaad.js"><link rel="prefetch" href="/assets/js/110.c1448e06.js"><link rel="prefetch" href="/assets/js/111.15daae95.js"><link rel="prefetch" href="/assets/js/112.8338d61d.js"><link rel="prefetch" href="/assets/js/113.ab08ae6f.js"><link rel="prefetch" href="/assets/js/114.e14d8abc.js"><link rel="prefetch" href="/assets/js/115.869e2c33.js"><link rel="prefetch" href="/assets/js/116.7e8559ae.js"><link rel="prefetch" href="/assets/js/117.7d3c511c.js"><link rel="prefetch" href="/assets/js/118.9b1240f7.js"><link rel="prefetch" href="/assets/js/119.2b127730.js"><link rel="prefetch" href="/assets/js/12.16b1daa2.js"><link rel="prefetch" href="/assets/js/120.87f58f0c.js"><link rel="prefetch" href="/assets/js/121.70ab9cc8.js"><link rel="prefetch" href="/assets/js/122.cabcfc2a.js"><link rel="prefetch" href="/assets/js/123.541e4943.js"><link rel="prefetch" href="/assets/js/124.f2062a0e.js"><link rel="prefetch" href="/assets/js/125.9e66949d.js"><link rel="prefetch" href="/assets/js/126.6b15c8b9.js"><link rel="prefetch" href="/assets/js/127.6146871d.js"><link rel="prefetch" href="/assets/js/128.e677db4d.js"><link rel="prefetch" href="/assets/js/129.09545436.js"><link rel="prefetch" href="/assets/js/13.0281535b.js"><link rel="prefetch" href="/assets/js/130.9c3abd94.js"><link rel="prefetch" href="/assets/js/131.3064267e.js"><link rel="prefetch" href="/assets/js/132.da532bf7.js"><link rel="prefetch" href="/assets/js/133.30702809.js"><link rel="prefetch" href="/assets/js/134.d9055538.js"><link rel="prefetch" href="/assets/js/135.14a41e74.js"><link rel="prefetch" href="/assets/js/136.32df2b71.js"><link rel="prefetch" href="/assets/js/137.ca50a89a.js"><link rel="prefetch" href="/assets/js/138.8dd073bf.js"><link rel="prefetch" href="/assets/js/139.004c55fd.js"><link rel="prefetch" href="/assets/js/14.bc811607.js"><link rel="prefetch" href="/assets/js/140.8bbac53a.js"><link rel="prefetch" href="/assets/js/141.fe81c4cc.js"><link rel="prefetch" href="/assets/js/142.dc8ae8dd.js"><link rel="prefetch" href="/assets/js/143.c1468060.js"><link rel="prefetch" href="/assets/js/144.3a348c7b.js"><link rel="prefetch" href="/assets/js/145.a25d6bb7.js"><link rel="prefetch" href="/assets/js/146.23fd565d.js"><link rel="prefetch" href="/assets/js/147.fc0983a0.js"><link rel="prefetch" href="/assets/js/148.cd70ec09.js"><link rel="prefetch" href="/assets/js/149.bf6ab5e6.js"><link rel="prefetch" href="/assets/js/15.c983b002.js"><link rel="prefetch" href="/assets/js/150.fa46f15b.js"><link rel="prefetch" href="/assets/js/151.9532788a.js"><link rel="prefetch" href="/assets/js/152.56813666.js"><link rel="prefetch" href="/assets/js/153.be301432.js"><link rel="prefetch" href="/assets/js/154.b071977c.js"><link rel="prefetch" href="/assets/js/155.4a802d60.js"><link rel="prefetch" href="/assets/js/156.61ff06b3.js"><link rel="prefetch" href="/assets/js/157.0bdab47c.js"><link rel="prefetch" href="/assets/js/158.825cafec.js"><link rel="prefetch" href="/assets/js/159.5643a12c.js"><link rel="prefetch" href="/assets/js/16.2f1c3448.js"><link rel="prefetch" href="/assets/js/160.22a89e92.js"><link rel="prefetch" href="/assets/js/161.ca7947b5.js"><link rel="prefetch" href="/assets/js/162.6f04d719.js"><link rel="prefetch" href="/assets/js/163.a95454b7.js"><link rel="prefetch" href="/assets/js/164.642a0c17.js"><link rel="prefetch" href="/assets/js/165.95da23db.js"><link rel="prefetch" href="/assets/js/166.175552e8.js"><link rel="prefetch" href="/assets/js/167.6ac57869.js"><link rel="prefetch" href="/assets/js/168.38747243.js"><link rel="prefetch" href="/assets/js/169.6b443b7f.js"><link rel="prefetch" href="/assets/js/17.bbaba275.js"><link rel="prefetch" href="/assets/js/170.78aebb35.js"><link rel="prefetch" href="/assets/js/171.61b5d111.js"><link rel="prefetch" href="/assets/js/172.b639d0f8.js"><link rel="prefetch" href="/assets/js/173.347a854a.js"><link rel="prefetch" href="/assets/js/174.a2cd1c97.js"><link rel="prefetch" href="/assets/js/175.4bd8cda6.js"><link rel="prefetch" href="/assets/js/176.db373907.js"><link rel="prefetch" href="/assets/js/177.ed85b401.js"><link rel="prefetch" href="/assets/js/178.74c6edea.js"><link rel="prefetch" href="/assets/js/179.2e18a603.js"><link rel="prefetch" href="/assets/js/18.b6762a2b.js"><link rel="prefetch" href="/assets/js/180.a63a43cb.js"><link rel="prefetch" href="/assets/js/181.a048129b.js"><link rel="prefetch" href="/assets/js/182.fdf5077d.js"><link rel="prefetch" href="/assets/js/183.027c2dec.js"><link rel="prefetch" href="/assets/js/184.930c4dcc.js"><link rel="prefetch" href="/assets/js/185.00ed7c41.js"><link rel="prefetch" href="/assets/js/186.0ba1c93f.js"><link rel="prefetch" href="/assets/js/187.7b0d317a.js"><link rel="prefetch" href="/assets/js/19.144c82e3.js"><link rel="prefetch" href="/assets/js/20.e631c2be.js"><link rel="prefetch" href="/assets/js/21.e7099142.js"><link rel="prefetch" href="/assets/js/22.3e9f6c68.js"><link rel="prefetch" href="/assets/js/23.5f3ae9b4.js"><link rel="prefetch" href="/assets/js/24.874cb236.js"><link rel="prefetch" href="/assets/js/25.8ef4dd62.js"><link rel="prefetch" href="/assets/js/26.76453e06.js"><link rel="prefetch" href="/assets/js/27.e7eaf9dc.js"><link rel="prefetch" href="/assets/js/28.ecf261ca.js"><link rel="prefetch" href="/assets/js/29.98863b55.js"><link rel="prefetch" href="/assets/js/3.829dd85b.js"><link rel="prefetch" href="/assets/js/30.8581643d.js"><link rel="prefetch" href="/assets/js/31.31b38b08.js"><link rel="prefetch" href="/assets/js/32.7b3d84e3.js"><link rel="prefetch" href="/assets/js/33.8ac976c5.js"><link rel="prefetch" href="/assets/js/34.9e053790.js"><link rel="prefetch" href="/assets/js/35.782db859.js"><link rel="prefetch" href="/assets/js/36.03b3e63f.js"><link rel="prefetch" href="/assets/js/37.5980d90f.js"><link rel="prefetch" href="/assets/js/39.76190893.js"><link rel="prefetch" href="/assets/js/4.a6ff6c73.js"><link rel="prefetch" href="/assets/js/40.c25b6dd0.js"><link rel="prefetch" href="/assets/js/41.061740ef.js"><link rel="prefetch" href="/assets/js/42.e826b333.js"><link rel="prefetch" href="/assets/js/43.f98089ed.js"><link rel="prefetch" href="/assets/js/44.440184ea.js"><link rel="prefetch" href="/assets/js/45.0711ba3e.js"><link rel="prefetch" href="/assets/js/46.9917f242.js"><link rel="prefetch" href="/assets/js/47.d5f2913a.js"><link rel="prefetch" href="/assets/js/48.67769cca.js"><link rel="prefetch" href="/assets/js/49.ef381d2f.js"><link rel="prefetch" href="/assets/js/5.29174b86.js"><link rel="prefetch" href="/assets/js/50.c964b8de.js"><link rel="prefetch" href="/assets/js/51.99e93d0a.js"><link rel="prefetch" href="/assets/js/52.4ccd47d8.js"><link rel="prefetch" href="/assets/js/53.de35c701.js"><link rel="prefetch" href="/assets/js/54.21207a14.js"><link rel="prefetch" href="/assets/js/55.f5360bdb.js"><link rel="prefetch" href="/assets/js/56.ab91f892.js"><link rel="prefetch" href="/assets/js/57.2d4454cd.js"><link rel="prefetch" href="/assets/js/58.8aa1e70d.js"><link rel="prefetch" href="/assets/js/59.5f07be27.js"><link rel="prefetch" href="/assets/js/6.f7be6a44.js"><link rel="prefetch" href="/assets/js/60.ce564487.js"><link rel="prefetch" href="/assets/js/61.998e4cd9.js"><link rel="prefetch" href="/assets/js/62.c8675b48.js"><link rel="prefetch" href="/assets/js/63.29398dac.js"><link rel="prefetch" href="/assets/js/64.e5dcf98b.js"><link rel="prefetch" href="/assets/js/65.fa9740f8.js"><link rel="prefetch" href="/assets/js/66.ae0c77a7.js"><link rel="prefetch" href="/assets/js/67.6bbb781b.js"><link rel="prefetch" href="/assets/js/68.59379074.js"><link rel="prefetch" href="/assets/js/69.f0508b5f.js"><link rel="prefetch" href="/assets/js/7.81423bd2.js"><link rel="prefetch" href="/assets/js/70.854be39d.js"><link rel="prefetch" href="/assets/js/71.5f582047.js"><link rel="prefetch" href="/assets/js/72.9e844147.js"><link rel="prefetch" href="/assets/js/73.6fb90507.js"><link rel="prefetch" href="/assets/js/74.43f51081.js"><link rel="prefetch" href="/assets/js/75.0c6b66ec.js"><link rel="prefetch" href="/assets/js/76.35461a8b.js"><link rel="prefetch" href="/assets/js/77.c7c7cee8.js"><link rel="prefetch" href="/assets/js/78.fe2f2eeb.js"><link rel="prefetch" href="/assets/js/79.8686b15c.js"><link rel="prefetch" href="/assets/js/8.71c1d1cf.js"><link rel="prefetch" href="/assets/js/80.34567803.js"><link rel="prefetch" href="/assets/js/81.ed82025a.js"><link rel="prefetch" href="/assets/js/82.5e180264.js"><link rel="prefetch" href="/assets/js/83.efa725f1.js"><link rel="prefetch" href="/assets/js/84.1748113e.js"><link rel="prefetch" href="/assets/js/85.4c2b3b47.js"><link rel="prefetch" href="/assets/js/86.94f15575.js"><link rel="prefetch" href="/assets/js/87.3f91983f.js"><link rel="prefetch" href="/assets/js/88.c1f41926.js"><link rel="prefetch" href="/assets/js/89.5058325f.js"><link rel="prefetch" href="/assets/js/9.96f83588.js"><link rel="prefetch" href="/assets/js/90.a8109101.js"><link rel="prefetch" href="/assets/js/91.2de3840a.js"><link rel="prefetch" href="/assets/js/92.c4460598.js"><link rel="prefetch" href="/assets/js/93.66619af2.js"><link rel="prefetch" href="/assets/js/94.60c25e02.js"><link rel="prefetch" href="/assets/js/95.2e6d1c32.js"><link rel="prefetch" href="/assets/js/96.63ba1d3d.js"><link rel="prefetch" href="/assets/js/97.f887884b.js"><link rel="prefetch" href="/assets/js/98.3562a0ce.js"><link rel="prefetch" href="/assets/js/99.4f6a7e8b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9825735b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">JadeBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/javascript_tutoriol/basic/introduction.html" class="nav-link">
  js基础教程
</a></li><li class="dropdown-item"><!----> <a href="/notes/es6/intro.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/notes/NODE/node.html" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/notes/webpack/base.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/notes/git/git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/CSS/css1.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes/JS/array.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/notes/VUE/vue.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/notes/OL/ol.html" class="nav-link">
  OpenLayers
</a></li><li class="dropdown-item"><!----> <a href="/notes/PERSIONAL/note1.html" class="nav-link">
  面试必知必会
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人学习" class="dropdown-title"><span class="title">个人学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人学习" class="mobile-dropdown-title"><span class="title">个人学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/eCharts/layout.html" class="nav-link">
  pink echarts
</a></li></ul></div></div><div class="nav-item"><a href="/resources/website/frontend_blogs.html" class="nav-link">
  优质链接
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/javascript_tutoriol/basic/introduction.html" class="nav-link">
  js基础教程
</a></li><li class="dropdown-item"><!----> <a href="/notes/es6/intro.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/notes/NODE/node.html" class="nav-link">
  nodeJS
</a></li><li class="dropdown-item"><!----> <a href="/notes/webpack/base.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/notes/git/git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/CSS/css1.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes/JS/array.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/notes/VUE/vue.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/notes/OL/ol.html" class="nav-link">
  OpenLayers
</a></li><li class="dropdown-item"><!----> <a href="/notes/PERSIONAL/note1.html" class="nav-link">
  面试必知必会
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人学习" class="dropdown-title"><span class="title">个人学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人学习" class="mobile-dropdown-title"><span class="title">个人学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/eCharts/layout.html" class="nav-link">
  pink echarts
</a></li></ul></div></div><div class="nav-item"><a href="/resources/website/frontend_blogs.html" class="nav-link">
  优质链接
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes/OL/ol.html" class="sidebar-link">openLayers</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>一、创建地图</p> <p>1、地图Map</p> <p>创建地图底图：需要用new ol.Map({})</p> <p>地图map是由图层layers、一个可视化视图view、用于修改地图内容的交互interaction以及使用UI组件的控件control组成的。</p> <p>(1)、创建基本地图</p> <p>let map = new ol.Map({</p> <p>target: 'map',//对象指向</p> <p>layers: [//图层</p> <p>new ol.layer.Tile({//这里定义的是平铺图层</p> <p>source: new ol.source.OSM()//图层源 定义图层映射协议</p> <p>})</p> <p>],</p> <p>view: new ol.View({//视图</p> <p>center: ol.proj.fromLonLat([37.41, 8.82]),//地图中心</p> <p>zoom: 4//缩放层级</p> <p>})</p> <p>});</p> <p>(2)、属性选项</p> <p>new ol.Map({</p> <p>target: 'map',//对象映射：要将<code>map</code>对象附加到div，<code>map</code>对象将<code>target</code>作为参数，值是<code>div</code>的<code>id</code></p> <p>layers: [//图层</p> <p>new ol.layer.Tile({//这里定义的是平铺图层</p> <p>source: new ol.source.OSM()//图层源 定义图层映射协议</p> <p>})</p> <p>],</p> <p>view: new ol.View({//视图</p> <p>center: ol.proj.fromLonLat([37.41, 8.82]),//地图中心</p> <p>zoom: 4//缩放层级</p> <p>}),</p> <p>controls:[//最初添加到映射中的控件 如未设置 使用默认控件</p> <p>new ol.control.Control({</p> <p>element:,//元素是控件的容器元素(DOM)。只有在开发自定义控件时才需要指定这一点</p> <p>render: ,//控件重新呈现时调用的函数</p> <p>target: //如果想在映射的视图端口之外呈现控件，指定目标</p> <p>})</p> <p>],</p> <p>interactions:[//最初添加到映射中的交互 如未设置 使用默认交互</p> <p>new ol.interaction.Interaction({</p> <p>handleEvent</p> <p>})</p> <p>],</p> <p>overlays:[</p> <p>new ol.Overlay()</p> <p>],</p> <p>maxTilesLoading:16,//同时加载的最大瓷砖数 默认16</p> <p>loadTilesWhileAnimating:false,//</p> <p>loadTilesWhileInteracting:false,//</p> <p>moveTolerance:1,//光标必须移动的最小距离(以像素为单位)才能被检测为map move事件，而不是单击。增加这个值可以使单击地图变得更容易</p> <p>pixelRatio:window.devicePixelRatio,//</p> <p>keyboardEventTarget:,//要监听键盘事件的元素</p> <p>})</p> <p>(3)、地图事件</p> <p>地图事件</p> <p>含义</p> <p>click</p> <p>无拖动单击</p> <p>dblclick</p> <p>无拖动双击</p> <p>moveend</p> <p>移动地图结束时</p> <p>movestart</p> <p>移动地图开始时</p> <p>pointerdrag</p> <p>当拖动指针时触发</p> <p>pointermove</p> <p>当指针移动时触发。注意，在触摸设备上，这是在地图平移时触发的，因此与mousemove不同</p> <p>postcompose</p> <p>postrender</p> <p>在映射帧呈现后触发</p> <p>precompose</p> <p>propertychange</p> <p>当属性被更改时触发</p> <p>rendercomplete</p> <p>渲染完成时触发，即当前视图的所有源和tile都已加载完毕，所有tile都将淡出</p> <p>singleclick</p> <p>一个真正的无拖放和无双击的单击。注意，这个事件被延迟了250毫秒，以确保它不是双击</p> <p>(4)、地图方法</p> <p>地图方法</p> <p>功能</p> <p>addControl(control)</p> <p>将给定的控件添加到地图中</p> <p>removeControl(control)</p> <p>从地图中移除已给定的控件</p> <p>addInteraction(interaction)</p> <p>将给定的交互添加到地图中</p> <p>removeInteraction(interaction)</p> <p>从地图中移除已给定的交互</p> <p>addLayer(layer)</p> <p>将给定的图层添加到地图的顶部</p> <p>removeLayer(layer)</p> <p>从地图中移除已给定的图层</p> <p>addOverlay(overlay)</p> <p>将给定的叠加层添加到地图中</p> <p>removeOverlay(overlay)</p> <p>从地图中移除已给定的叠加层</p> <p>forEachFeatureAtPixel(pixel, callback, opt_options)</p> <p>检测与视图端口上的像素相交的特性，并对每个相交的特性执行回调。检测中包含的层可以通过opt_options中的layerFilter选项配置</p> <p>forEachLayerAtPixel(pixel, callback, opt_options)</p> <p>检测在视图端口上的像素处具有颜色值的层，并对每个匹配的层执行回调。检测中包含的层可以通过opt_layerFilter配置</p> <p>getControls()</p> <p>获取地图控件</p> <p>getCoordinateFromPixel(pixel)</p> <p>获取给定像素的坐标。这将返回地图视图投影中的坐标。</p> <p>getEventCoordinate(event)</p> <p>返回浏览器事件的视图投影中的坐标</p> <p>getEventPixel(event)</p> <p>返回浏览器事件相对于视图端口的地图像素位置</p> <p>getFeaturesAtPixel(pixel, opt_options)</p> <p>获取视图端口上与像素相交的所有特性</p> <p>getInteractions()</p> <p>获取地图交互</p> <p>getLayerGroup()</p> <p>获取与此地图关联的图层组</p> <p>setLayerGroup(layerGroup)</p> <p>设置与此地图关联的图层组</p> <p>getLayers()</p> <p>获取与此地图关联的图层的集合</p> <p>getOverlayById(id)</p> <p>通过其标识符获取覆盖(overlay. getId()返回的值)。注意，索引将字符串和数字标识符视为相同的。getoverlaybyid(2)将返回id为2或2的叠加层。</p> <p>getOverlays()</p> <p>获得地图叠加</p> <p>getPixelFromCoordinate(coordinate)</p> <p>获取坐标的像素。它接受地图视图投影中的坐标并返回相应的像素</p> <p>getSize()</p> <p>获取地图尺寸</p> <p>setSize(size)</p> <p>s设置地图尺寸</p> <p>getTarget()</p> <p>获取呈现此映射的目标。注意，这将返回作为选项或setTarget中输入的内容。如果这是一个元素，它将返回一个元素;如果是字符串，它会返回这个字符串</p> <p>setTarget(target)</p> <p>设置要将地图呈现的目标元素</p> <p>getTargetElement()</p> <p>获取呈现此映射的DOM元素。与getTarget相反，这个方法总是返回一个元素，如果映射没有目标，则返回null</p> <p>getView()</p> <p>获取地图视图。视图管理中心和分辨率等属性。</p> <p>setView(view)</p> <p>设置地图视图</p> <p>getViewport()</p> <p>获取作为map视图端口的元素</p> <p>hasFeatureAtPixel(pixel, opt_options)</p> <p>检测在viewport上是否与一个像素相交。可以通过opt_layerFilter配置在检测中包含的层。</p> <p>2、图层Layers</p> <p>定义图层：地图图层layers:[...]组定义映射中可用的图层组，用来盛放地图上的各种元素，其在地图上的显示顺序是按照数组中元素序列从下到上呈现的，可以直接在创建地图时定义图层，多个图层的时候可以单独定义。</p> <p>const layer = new ol.layer.Vector({//这里定义的是图层类型(Image/Title/Vector)</p> <p>source:new ol.source.Vector(),//矢量图层源 源是用于获取映射块的协议【必须】</p> <p>style:[],//图层样式 【必须】</p> <p>feature:[],//图层元素 【必须】</p> <p>})</p> <p>添加指定图层：map.addLayer(layer)；</p> <p>移除指定图层：map.removeLayer(layer)；</p> <p>图层是轻量级容器，从数据源Source获取数据。</p> <p>Sourced子类分别有，分别对应不同图层类：</p> <p>ol.source.ImageSource()</p> <p>ol.source.TileSource()</p> <p>ol.source.VectorSource()</p> <p>Source主要有以下属性选项：</p> <p>new ol.source.VectorSource({</p> <p>attributions:,//</p> <p>attributionsCollapsible:,//布尔值 默认为true</p> <p>projection:,//投影系</p> <p>state:'ready',//默认为'ready'</p> <p>wrapX:false,//默认为false</p> <p>})</p> <p>ol.layer.Tile()和ol.layer.Image()图层类都具有相同的属性如下：</p> <p>new ol.layer.Tile/Image({//以下为图层的属性选项， 都可设置，所以皆有getter/setter</p> <p>opacity:2,//透明度 区间范围为(0, 1) 默认为1</p> <p>visible:true,//显示属性 布尔值 默认为true</p> <p>extent:[],//图层渲染的边界范围。该层将不会在此范围之外呈现</p> <p>zIndex:2,//图层渲染的索引层级。在渲染时，图层将被排序，首先是z-idnex，然后是位置，当为undefined时，对于添加到映射的layers集合中的层，zIndex为0，或者当使用该层的setMap()方法时，zIndex为无穷大</p> <p>minResolution:3,//该层可见的最小分辨率(包括在内)</p> <p>maxResolution:6,//该层可见的最大分辨率(包括在内)</p> <p>repload:0,//预加载。将低分辨率瓦片加载到预加载级别。0表示没有预加载 默认为0</p> <p>source:new ol.source.TileSource()/ImageSource(),//图层源</p> <p>map: ,//把图层覆盖在地图上，地图不会在它的图层集合中管理这个图层，这个图层将被呈现在顶部，这对于临时层非常有用。</p> <p>})</p> <p>(1)ol.layer.Tile()</p> <p>平铺图层。</p> <p>对于提供预呈现、平铺的网格图像的层源，这些网格按特定分辨率的缩放级别组织。</p> <p>(2)ol.layer.Image()</p> <p>图像图层。</p> <p>服务器呈现的映像，可用于任意范围和分辨率。</p> <p>(3)ol.layer.Vector()</p> <p>矢量图层。</p> <p>在客户端呈现矢量数据，其属性具备getter和setter</p> <p>new ol.layer.Vector({//以下为图层的属性选项， 都可设置，所以皆有getter/setter</p> <p>opacity:2,//透明度 区间范围为(0, 1) 默认为1</p> <p>visible:true,//显示属性 布尔值 默认为true</p> <p>extent:[],//图层渲染的边界范围。该层将不会在此范围之外呈现</p> <p>zIndex:2,//图层渲染的索引层级。在渲染时，图层将被排序，首先是z-idnex，然后是位置，当为undefined时，对于添加到映射的layers集合中的层，zIndex为0，或者当使用该层的setMap()方法时，zIndex为无穷大</p> <p>minResolution:3,//该层可见的最小分辨率(包括在内)</p> <p>maxResolution:6,//该层可见的最大分辨率(包括在内)</p> <p>renderOrder:,//呈现顺序。函数用于在呈现前对特性进行排序。默认情况下，特性是按照创建它们的顺序绘制的。使用null来避免排序，但是得到一个未定义的绘制顺序</p> <p>renderBuffer:100,//默认为100 缓冲区</p> <p>renderMode:'vector',//默认为'vector' 矢量图层的渲染模式</p> <p>source:new ol.source.VectorSource(),//图层源</p> <p>map: ,//把图层覆盖在地图上，地图不会在它的图层集合中管理这个图层，这个图层将被呈现在顶部，这对于临时层非常有用</p> <p>declutter:false,//默认为false 整理图片和文字。清理应用于所有图像和文本样式，优先级由样式的z-index定义。z-index指数越低，优先级越高</p> <p>style:new ol.style.Style(),//图层样式</p> <p>updateWhileAnimating:false,//默认为false</p> <p>updateWhileInteracting:false,//默认为false</p> <p>})</p> <p>其中渲染模式有两种：</p> <p>'image'：矢量图层被渲染为图像。性能很好，但是点符号和文本总是随着视图旋转，像素在缩放动画中缩放</p> <p>'vector'：矢量图层被呈现为向量。即使在动画期间也有最准确的渲染，但性能较慢</p> <p>1)Feature</p> <p>用于地理特征的矢量元素，具有几何geometry()和其他属性，类似于矢量文件格式(如GeoJSON)中的特性。</p> <p>添加矢量元素：通过vectorsource().addFeature(feature)添加到矢量图层上。</p> <p>移除图层所有的矢量元素：vectorsource().clear()</p> <p>let feature = new ol.Feature({</p> <p>geometry: new ol.geom.Polygon(polyCoords),</p> <p>labelPoint: new ol.geom.Point(labelCoords),</p> <p>style:new ol.style.Style({}),</p> <p>name: 'My Polygon'</p> <p>});</p> <p>定义矢量元素：new ol.Feature()，；</p> <p>矢量元素样式：</p> <p>设置样式：new ol.style.Style()，也可以使用feature.setStyle(style)，未定义的话，可以使用它的盛放容器layer的样式；</p> <p>获取样式：feature.getStyle()</p> <p>一个feature只有一个默认几何属性geometry，可以有任意数量的命名几何图形：</p> <p>获取默认几何属性：feature.getGeometry()；</p> <p>设置几何属性：feature.setGeometry(geometry)；</p> <p>设置几何属性名：feature.setGeometryName(name)；</p> <p>矢量元素要呈现的几何图形的特征属性、几何图形或函数由geometry属性选项设定，主要有以下几种子类模块：</p> <p>ol.geom.Circle()：圆形</p> <p>ol.geom.Geometry()：几何图形</p> <p>ol.geom.GeometryCollection()：</p> <p>ol.geom.LinearRing()：环线</p> <p>ol.geom.LineString()：线段</p> <p>ol.geom.Point()：点</p> <p>ol.geom.Polygon()：多边形</p> <p>ol.geom.MultiLineString()</p> <p>ol.geom.MultiPoint()</p> <p>ol.geom.MultiPolygon()</p> <p>ol.geom.SimpleGeometry()</p> <p>feature的稳定标识符ID：</p> <p>设置feature的id：feature.setId(id)，当id可能相同时，可以这样加以区分</p> <p>feature.setId(id + &quot;featureName&quot;);</p> <p>获取feature的id：vector.getSource().getFeatureById()或者vectorsource().getFeatureById()</p> <p>feature的set(key, value, opt_silent)：</p> <p>设置key：feature.set(&quot;keyName&quot;,name)，keyName是字符串，自己根据情况设置</p> <p>获取key：之前设置的什么，就获取什么，feature.get(&quot;keyName&quot;)，会得到设置的值</p> <p>2)Style</p> <p>矢量特征呈现样式的容器。在重新呈现使用样式的特性或图层之前，通过set*()方法对样式及其子元素所做的任何更改都不会生效。</p> <p>new ol.style.Style({</p> <p>geometry:new ol.geom.LineString(),//有以上ol.geom模块的几何图形可以参考</p> <p>fill:new ol.style.Fill({//填充样式</p> <p>color:color//颜色、渐变或图案</p> <p>}),</p> <p>image:new ol.style.Image({//图像</p> <p>opacity:,//数值</p> <p>rotateWithView:,//布尔值</p> <p>rotation:,//数值</p> <p>scale://数值</p> <p>}),</p> <p>image:new ol.style.Icon({//可以使用图片资源</p> <p>anchor:[0.5，0.5]，//锚。默认值是图标中心 默认值是[0.5,0.5]</p> <p>anchorOrigin:'top-left',//锚的原点:左下角、右下角、左上方或右上方。默认是左上</p> <p>anchorXUnits:'fraction',//指定锚点x值的单位。'fraction'的值表示x值是图标的'fraction'。'pixels'的值表示像素中的x值,默认为'fraction'</p> <p>anchorYUnits:'fraction',//指定锚点y值的单位。'fraction'的值表示y值是图标的'fraction'。'pixels'的值表示像素中的y值,默认为'fraction'</p> <p>color:color,//颜色、渐变或图案</p> <p>crossOrigin:,</p> <p>img:,//图标的图像对象 如果没有提供src选项，则必须已经加载了提供的图像</p> <p>imgSize:,//</p> <p>offset:[0,0].//偏移值，默认为[0,0]</p> <p>offsetOrigin:'top-left',//偏移量的原点，bottom-left, bottom-right, top-left or top-right. 默认是<code>top-left</code></p> <p>opacity:1,//默认是1 (0，1)</p> <p>scale:1,//默认是1</p> <p>rotation：0，//以弧度旋转(顺时针方向正旋转) 默认为0</p> <p>size：,//图标大小(以像素为单位)。可与偏移量一起用于定义要从原点(sprite)图标图像使用的子矩形</p> <p>src:'',//图像URL源</p> <p>rotateWithView：false,//是否旋转视图中的图标 默认为false</p> <p>}),</p> <p>stroke:new ol.style.Stroke({//描绘</p> <p>width: ,//宽</p> <p>color:color,//颜色、渐变或图案</p> <p>lineCap:'round',//线帽风格 butt, round, 或者 square 默认 round</p> <p>lineJoin:'round',//线连接方式 bevel, round, 或者 miter 默认 round</p> <p>lineDash： []，//线间隔模式 这个变化与分辨率有关 默认为undefined Internet Explorer 10和更低版本不支持</p> <p>lineDashOffset:0,//线段间隔偏移 默认0</p> <p>miterLimit:10,// 默认10</p> <p>}),</p> <p>text:new ol.style.Text({//文字</p> <p>font:'',//默认是'10px sans-serif'</p> <p>text:'',//文本内容</p> <p>textAlign：'center',//文本对齐 'left', 'right', 'center', 'end' 'start'.针对于placement: 'point',默认为'center'；针对于placement: 'line'，默认是让渲染器选择不超过maxAngle的位置</p> <p>textBaseline:'middle',//文本基线 'bottom', 'top', 'middle', 'alphabetic', 'hanging', 'ideographic' 默认'middle'</p> <p>placement:'',//文本布置</p> <p>scale：，</p> <p>padding:[0,0,0,0],//文本周围的像素填充。数组中值的顺序是[top, right, bottom, left]</p> <p>fill:new ol.style.Fill(),//如果未设置，默认未#333</p> <p>stroke:new ol.style.Stroke(),</p> <p>offsetX:0,//水平文本偏移量(以像素为单位)。正值将把文本右移。默认0</p> <p>offsetY:0,//垂直文本偏移量(以像素为单位)。正值会将文本向下移动。默认0</p> <p>rotation：0，//默认0</p> <p>rotateWithView:false,</p> <p>backgroundFill: ,//当placement:“point”时，填充文本背景的样式。默认为无填充</p> <p>backgroundStroke: ,//当placement:“point”时，描绘文本背景的样式。默认为无描绘</p> <p>}),</p> <p>zIndex:,</p> <p>})</p> <p>ol.geom.Geomtry()是矢量几何对象的抽象基类，通常只用于创建子类，而不是在应用程序中实例化。它的方法如下：</p> <p>方法</p> <p>功能</p> <p>set(key, value)</p> <p>设置值。key：关键名字(字符串)；value：值</p> <p>get(key)</p> <p>获取值</p> <p>setProperties(values, opt_silent)</p> <p>设置键值对的集合。注意，这将更改任何现有属性并添加新属性(它不会删除任何现有属性)。</p> <p>getProperties()</p> <p>获取一个包含所有属性名和值的对象</p> <p>getClosestPoint(point, opt_closestPoint)</p> <p>将几何图形的最近点作为坐标返回到经过的点</p> <p>getExtent(opt_extent)</p> <p>获取几何的范围</p> <p>getKeys()</p> <p>获取对象属性名称列表</p> <p>getRevision()</p> <p>获取此对象的版本号。每次修改对象时，它的版本号都会增加。</p> <p>intersectsCoordinate(coordinate)</p> <p>如果该几何图形包含指定的坐标，则返回true。如果坐标位于几何图形的边界上，则返回false</p> <p>rotate(angle, anchor)</p> <p>围绕给定的坐标旋转几何图形。这将修改现有的几何坐标</p> <p>scale(sx, opt_sy, opt_anchor)</p> <p>缩放几何图形(可选原点)。这将修改现有的几何坐标。sx：x方向上的缩放因子；sy：Y轴上的缩放因子；opt_anchor`：缩放原点(默认为几何范围的中心)</p> <p>simplify(tolerance)</p> <p>创建这个几何图形的简化版本</p> <p>transform(source, destination)</p> <p>将圆的每个坐标从一个坐标系变换到另一个坐标系。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数。在内部，一个圆目前由两点表示:圆心[cx, cy]和圆心右边的点[cx + r, cy]。这个transform函数只变换这两点。所以得到的几何形状也是一个圆，而这个圆并不等同于通过变换原圆的每一点得到的形状</p> <p>translate(deltaX, deltaY)</p> <p>翻转几何图形。这将修改现有的几何坐标。如果您想要一个新的几何体，那么首先clone()这个几何体</p> <p>以下是ol.geom.Geomtry抽象基类创建的常见子类模块：</p> <p>1)ol.geom.Circle()</p> <p>new ol.geom.Circle({</p> <p>center:[],//中心点</p> <p>radius:2,//圆半径</p> <p>layout://布局</p> <p>})</p> <p>方法</p> <p>功能</p> <p>applyTransform(transformFn)</p> <p>对几何图形的每个坐标应用一个变换函数。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数</p> <p>clone()</p> <p>把几何图形复制一份</p> <p>getCenter()</p> <p>返回中心坐标</p> <p>getFirstCoordinate()</p> <p>返回几何图形的第一个坐标</p> <p>getLastCoordinate()</p> <p>返回几何图形的最后一个坐标</p> <p>getLayout()</p> <p>返回几何图形的layout</p> <p>getRadius()</p> <p>返回圆的半径</p> <p>getType()</p> <p>获取这个几何图形的类型</p> <p>intersectsExtent(extent)</p> <p>测试几何形状和经过的区域是否相交，返回布尔值</p> <p>rotate(angle, anchor)</p> <p>围绕给定的坐标旋转几何图形。这将修改现有的几何坐标。angle：以弧度为单位的旋转角度；anchor：旋转中心</p> <p>scale(sx, opt_sy, opt_anchor)</p> <p>缩放几何图形(可选原点)。这将修改现有的几何坐标。sx：x方向上的缩放因子；sy：Y轴上的缩放因子；opt_anchor：缩放原点(默认为几何范围的中心)</p> <p>setCenter(center)</p> <p>将圆心设置为coordinate</p> <p>setCenterAndRadius(center, radius, opt_layout)</p> <p>设置圆的中心(coordinate)和半径(number)</p> <p>setRadius(radius)</p> <p>设置圆的半径。半径的单位是投影的单位。</p> <p>transform(source, destination)</p> <p>将圆的每个坐标从一个坐标系变换到另一个坐标系。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数。在内部，一个圆目前由两点表示:圆心[cx, cy]和圆心右边的点[cx + r, cy]。这个transform函数只变换这两点。所以得到的几何形状也是一个，而这个圆并不等同于通过变换原圆的每一点得到的形状</p> <p>translate(deltaX, deltaY)</p> <p>f翻转几何图形。这将修改现有的几何坐标。如果您想要一个新的几何体，那么首先clone()这个几何体</p> <p>2)ol.geom.LineString(coordinates, opt_layout)</p> <p>new ol.geom.LineString({</p> <p>coordinate:[],//坐标。对于内部使用，平面坐标结合opt_layout也可以接受</p> <p>layout: //Layout</p> <p>})</p> <p>方法</p> <p>功能</p> <p>appendCoordinate(coordinate)</p> <p>将经过的坐标追加到linestring的坐标里</p> <p>applyTransform(transformFn)</p> <p>对几何图形的每个坐标应用一个变换函数。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数</p> <p>clone()</p> <p>把几何图形复制一份</p> <p>forEachSegment(callback)</p> <p>遍历每条线段，调用提供的回调函数。如果回调函数返回一个真值，则函数立即返回该值。否则函数返回false</p> <p>getCoordinateAt(fraction, opt_dest)</p> <p>沿着线段返回给定部分的坐标。fraction是一个介于0和1之间的数字，其中0是线段的开始，1是线段的末尾</p> <p>getCoordinates()</p> <p>返回线段的坐标</p> <p>setCoordinates(coordinates, opt_layout)</p> <p>s设置线段的坐标</p> <p>getFirstCoordinate()</p> <p>返回几何图形的第一个坐标</p> <p>getLastCoordinate()</p> <p>返回几何图形的最后一个坐标</p> <p>getLayout()</p> <p>返回几何图形的Layout</p> <p>getLength()</p> <p>在投影平面上返回线段的长度</p> <p>getType()</p> <p>得到这个几何图形的类型</p> <p>intersectsExtent(extent)</p> <p>测试几何形状和通过的范围是否相交</p> <p>rotate(angle, anchor)</p> <p>围绕给定的坐标旋转几何图形。这将修改现有的几何坐标</p> <p>scale(sx, opt_sy, opt_anchor)</p> <p>缩放几何图形(可选原点)。这将修改现有的几何坐标。sx：x方向上的缩放因子；sy：Y轴上的缩放因子；opt_anchor`：缩放原点(默认为几何范围的中心)</p> <p>translate(deltaX, deltaY)</p> <p>翻转几何图形。这将修改现有的几何坐标。如果您想要一个新的几何体，那么首先clone()这个几何体</p> <p>3)ol.geom.Point(coordinates, opt_layout)</p> <p>new ol.geom.Point()</p> <p>方法</p> <p>功能</p> <p>applyTransform(transformFn)</p> <p>对几何图形的每个坐标应用一个变换函数。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数</p> <p>clone()</p> <p>把几何图形复制一份</p> <p>getCoordinates()</p> <p>返回点的坐标</p> <p>setCoordinates(coordinates, opt_layout)</p> <p>设置点的坐标</p> <p>getFirstCoordinate()</p> <p>返回几何图形的第一个坐标</p> <p>getLastCoordinate()</p> <p>返回几何图形的最后一个坐标</p> <p>getLayout()</p> <p>返回几何图形的Layout</p> <p>getType()</p> <p>得到这个几何图形的类型</p> <p>intersectsExtent(extent)</p> <p>测试几何形状和通过的范围是否相交</p> <p>rotate(angle, anchor)</p> <p>围绕给定的坐标旋转几何图形。这将修改现有的几何坐标</p> <p>scale(sx, opt_sy, opt_anchor)</p> <p>缩放几何图形(可选原点)。这将修改现有的几何坐标。sx：x方向上的缩放因子；sy：Y轴上的缩放因子；opt_anchor`：缩放原点(默认为几何范围的中心)</p> <p>translate(deltaX, deltaY)</p> <p>翻转几何图形。这将修改现有的几何坐标。如果您想要一个新的几何体，那么首先clone()这个几何体</p> <p>(4)ol.geom.Polygon()</p> <p>多边形几何图形。</p> <p>new ol.geom.Polygon({</p> <p>coordinates:[],//定义多边形的线性环的数组</p> <p>layout:,</p> <p>ends:[],//末端(平面坐标内部使用)</p> <p>})</p> <p>方法</p> <p>功能</p> <p>applyTransform(transformFn)</p> <p>对几何图形的每个坐标应用一个变换函数。在适当的位置修改几何图形。如果不想修改几何图形，请首先clone()它，然后在克隆上使用此函数</p> <p>appendLinearRing(linearRing)</p> <p>在多边形上追加线性环</p> <p>clone()</p> <p>把几何图形复制一份</p> <p>getCoordinates()</p> <p>返回点的坐标</p> <p>setCoordinates(coordinates, opt_layout)</p> <p>设置点的坐标</p> <p>getFirstCoordinate()</p> <p>返回几何图形的第一个坐标</p> <p>getLastCoordinate()</p> <p>返回几何图形的最后一个坐标</p> <p>getInteriorPoint()</p> <p>返回多边形的内部点</p> <p>getLinearRing(index)</p> <p>返回多边形几何的第n个线性环。如果给定索引超出范围，则返回null。外部线性环在索引0处可用，而内部环在索引1及以上处可用</p> <p>getLinearRings()</p> <p>返回多边形的线性环</p> <p>getLinearRingCount()</p> <p>返回多边形的环数，这包括外部环和任何内部环</p> <p>getLayout()</p> <p>返回几何图形的Layout</p> <p>getType()</p> <p>得到这个几何图形的类型</p> <p>getArea()</p> <p>返回投影平面上多边形的面积</p> <p>intersectsExtent(extent)</p> <p>测试几何形状和通过的范围是否相交</p> <p>rotate(angle, anchor)</p> <p>围绕给定的坐标旋转几何图形。这将修改现有的几何坐标</p> <p>scale(sx, opt_sy, opt_anchor)</p> <p>缩放几何图形(可选原点)。这将修改现有的几何坐标。sx：x方向上的缩放因子；sy：Y轴上的缩放因子；opt_anchor`：缩放原点(默认为几何范围的中心)</p> <p>translate(deltaX, deltaY)</p> <p>翻转几何图形。这将修改现有的几何坐标。如果您想要一个新的几何体，那么首先clone()这个几何体</p> <p>(4)ol.layer.VectorTile()</p> <p>矢量平铺图层。</p> <p>图层用于客户端呈现矢量平铺数据。</p> <p>new ol.layer.Vector({//以下为图层的属性选项， 都可设置，所以皆有getter/setter</p> <p>opacity:2,//透明度 区间范围为(0, 1) 默认为1</p> <p>visible:true,//显示属性 布尔值 默认为true</p> <p>extent:[],//图层渲染的边界范围。该层将不会在此范围之外呈现</p> <p>zIndex:2,//图层渲染的索引层级。在渲染时，图层将被排序，首先是z-idnex，然后是位置，当为undefined时，对于添加到映射的layers集合中的层，zIndex为0，或者当使用该层的setMap()方法时，zIndex为无穷大</p> <p>minResolution:3,//该层可见的最小分辨率(包括在内)</p> <p>maxResolution:6,//该层可见的最大分辨率(包括在内)</p> <p>renderOrder:,//呈现顺序。函数用于在呈现前对特性进行排序。默认情况下，特性是按照创建它们的顺序绘制的。使用null来避免排序，但是得到一个未定义的绘制顺序</p> <p>renderBuffer:100,//默认为100 缓冲区</p> <p>renderMode:'vector',//默认为'vector' 矢量图层的渲染模式</p> <p>source:new ol.source.VectorSource(),//图层源</p> <p>map: ,//把图层覆盖在地图上，地图不会在它的图层集合中管理这个图层，这个图层将被呈现在顶部，这对于临时层非常有用</p> <p>declutter:false,//默认为false 整理图片和文字。清理应用于所有图像和文本样式，优先级由样式的z-index定义。z-index指数越低，优先级越高</p> <p>style:new ol.style.Style(),//图层样式</p> <p>updateWhileAnimating:false,//默认为false</p> <p>updateWhileInteracting:false,//默认为false</p> <p>preload:,//</p> <p>renderOrder:,//</p> <p>useInterimTilesOnError:true,//错误时使用临时贴片 默认true</p> <p>})</p> <p>3、视图view</p> <p>设置视图view由三种状态决定：center中心、resolution分辨率、rotation旋转，每个状态都有相应的getter和setter。</p> <p>可以在视图里定义地图中心点、层级、分辨率、旋转以及地图投影等。</p> <p>视图对象受到约束，主要有分辨率约束、旋转约束、中心约束。</p> <p>分辨率约束切换到特定分辨率时，特定分辨率主要由以下选项决定：resolutions、maxResolution、maxZoom、zoomFactor。如果已经设置resolutions，其他选项就可忽略。</p> <p>旋转约束会切换到特定的角度。它由以下选项决定:enableRotation和constrainRotation。在默认情况下，当接近水平线时，旋转值会突然变为零。</p> <p>中心约束由范围选项决定。默认情况下，中心完全不受约束。</p> <p>(1)视图选项</p> <p>1)中心点center</p> <p>视图的初始中心，中心的坐标系由投影projection指定，如果未设置此参数，则不会获取层源，但是之后可以使用#setCenter设置中心。</p> <p>let center = ol.proj.fromLonLat([longitude, latitude]);//未限制地图范围时</p> <p>let center = ol.proj.transform([minX, minY, maxX, maxY]，'EPSG:4326', 'EPSG:3857');//限制地图显示范围时设置中心点 X代表经度， Y代表纬度</p> <p>ol.proj.transform([], &quot;EPSG:&quot;, &quot;EPSG:&quot;)是经纬度投影转换</p> <p>获取中心：map.getView().getCenter()</p> <p>设置中心：map.getView().setCenter(center)</p> <p>2)投影projection</p> <p>视图拥有projection投影，投影决定了中心的坐标系，其单位决定了分辨率的单位(每个像素的投影单位)。默认投影为球面墨卡托(EPSG:3857)。</p> <p>获取投影：map.getView().getProjection()</p> <p>设置投影：map.getView().setProjection()</p> <p>3)分辨率resolution</p> <p>视图的初始分辨率，单位是每像素的投影单位(例如米每像素)。</p> <p>另一种方法是设置缩放zoom。缩放可以设置：最大层级maxZoom、最小层级minZoom以及当前层级zoom</p> <p>let view = new ol.View({</p> <p>// center: center,</p> <p>zoom: curZoom,</p> <p>minZoom: minZoom,</p> <p>maxZoom: maxZoom,</p> <p>});</p> <p>获取分辨率：map.getView().getResolution()</p> <p>获取给定范围(以映射单元为单位)和大小(以像素为单位)的分辨率：map.getView().getResolutionForExtent(extent, opt_size)；</p> <p>获取缩放级别的分辨率：map.getView().getResolutionForZoom(zoom)；</p> <p>获取视图最大值分辨率：map.getView().getMaxResolution()；</p> <p>获取视图最小值分辨率：map.getView().getMinResolution()；</p> <p>设置分辨率：map.getView().setResolution(resolution)</p> <p>4)旋转rotation</p> <p>初始旋转角度为弧度(正顺时针旋转，0表示向北)。</p> <p>获取旋转调用方法map.getView().getRotation()；</p> <p>设置旋转调用方法map.getView().setRotation(rotation);</p> <p>5)缩放zoom</p> <p>仅在未定义分辨率时使用。</p> <p>缩放级别用于计算视图的初始分辨率。初始分辨率是使用#constrainResolution方法确定的。</p> <p>获取缩放层级：map.getView().getZoom()；</p> <p>获取最大缩放层级：map.getView().getMaxZoom()；</p> <p>获取最小缩放层级：map.getView().getMinZoom()；</p> <p>获取缩放层级的分辨率：map.getView().getZoomForResolution(resolution)；</p> <p>设置缩放层级：map.getView().setZoom(zoom)；</p> <p>设置最大缩放层级：map.getView().setMaxZoom(zoom)；</p> <p>设置最小缩放层级：map.getView().setMinZoom(zoom)；</p> <p>6)旋转约束constrainRotation</p> <p>旋转约束。false为未约束，true为未约束但是接近于0。数字限制了旋转到该值的数量。</p> <p>7)启用旋转enableRotation</p> <p>如果为false，则始终使用将旋转设置为零的旋转约束。如果启用为false，则没有效果。</p> <p>8)约束范围extent</p> <p>中心点不能超出这个范围。</p> <p>(2)视图方法</p> <p>1)动画animate(var_args)</p> <p>单个动画</p> <p>动画视图。视图的中心、缩放(或分辨率)和旋转可以通过动画来实现视图状态之间的平滑转换。</p> <p>默认情况下，动画持续时间为1秒，并且类型为in-and-out easing。</p> <p>通过设置持续时间duration(以毫秒为单位)和缓动选项easing(参见模块:ol/easing)来定制此行为。</p> <p>easing:</p> <p>easeIn：平缓加速</p> <p>easeOut：平缓减速</p> <p>inAndOut：平缓开始，先加速，再减速</p> <p>linear：匀速</p> <p>upAndDown：平缓开始，加速，最后再减速。这与模块的一般行为相同:ol/easing~inAndOut，但是最终的减速被延迟了</p> <p>多个动画</p> <p>要将多个动画连接在一起，请使用多个动画对象调用该方法。</p> <p>如果提供一个函数作为animate方法的最后一个参数，它将在动画系列的末尾被调用。</p> <p>如果动画系列独立完成，回调函数将被调用true;如果动画系列被取消，回调函数将被调用false。</p> <p>取消动画</p> <p>动画通过用户交互(例如拖动地图)或调用view.setCenter()、view.setResolution()或view.setRotation()(或调用其中一个方法的另一个方法)来取消。</p> <p>2)取消动画cancelAnimations()</p> <p>取消任何正在进行的动画。</p> <p>(3)getAnimating()</p> <p>确定视图是否处于动画状态。返回布尔值。</p> <p>4)计算范围calculateExtent(opt_size)</p> <p>计算当前视图状态的范围和传递的大小。opt_size指盒子像素尺寸，如未提供，将使用此视图的第一个映射的大小。</p> <p>尺寸是盒子的像素尺寸，计算的范围应该与之匹配。</p> <p>想要获取整个底图映射的范围，使用map.getSize()</p> <p>5)centerOn(coordinate, size, position)</p> <p>以坐标和视图位置为中心。</p> <p>coordinate：坐标点</p> <p>size：盒子像素尺寸</p> <p>position：视图的居中位置</p> <p>4、交互动作interaction</p> <p>通常只用于创建子类，而不在应用程序中实例化。</p> <p>用于更改映射状态的用户操作。有些类似于控件，但不与DOM元素关联。</p> <p>虽然交互没有DOM元素，但是它们中的一些会呈现向量，因此在屏幕上是可见的。</p> <p>添加交互动作使用：map.addInteraction(interaction);</p> <p>OpenLayers 中可实例化的子类及其功能如下：</p> <p>可实例化子类</p> <p>功能</p> <p>doubleclickzoom interaction</p> <p>双击放大交互功能</p> <p>draganddrop</p> <p>以“拖文件到地图中”的交互添加图层</p> <p>dragbox</p> <p>拉框，用于划定一个矩形范围，常用于放大地图</p> <p>dragpan</p> <p>拖拽平移地图</p> <p>dragrotateandzoom</p> <p>拖拽方式进行缩放和旋转地图</p> <p>dragrotate</p> <p>拖拽方式旋转地图</p> <p>dragzoom</p> <p>拖拽方式缩放地图</p> <p>draw</p> <p>绘制地理要素功能</p> <p>interaction defaults</p> <p>默认添加的交互功能</p> <p>keyboardpan</p> <p>键盘方式平移地图</p> <p>keyboardzoom</p> <p>键盘方式缩放地图</p> <p>select</p> <p>选择要素功能</p> <p>modify</p> <p>更改要素</p> <p>mousewheelzoom</p> <p>鼠标滚轮缩放功能</p> <p>pinchrotate</p> <p>手指旋转地图，针对触摸屏</p> <p>pinchzoom</p> <p>手指进行缩放，针对触摸屏</p> <p>pointer</p> <p>鼠标的用户自定义事件基类</p> <p>snap</p> <p>鼠标捕捉，当鼠标距离某个要素一定距离之内，自动吸附到要素</p> <p>(1)默认交互功能ol.interaction.defaylts()</p> <p>主要是最为常用的功能，如缩放、平移和旋转地图等，具体功能有如下这些：</p> <p>默认交互</p> <p>功能</p> <p>ol.interaction.DragRotate</p> <p>鼠标拖拽旋转，一般配合一个键盘按键辅助</p> <p>ol.interaction.DragZoom</p> <p>鼠标拖拽缩放，一般配合一个键盘按键辅助</p> <p>ol.interaction.DoubleClickZoom</p> <p>鼠标或手指双击缩放地图</p> <p>ol.interaction.PinchRotate</p> <p>两个手指旋转地图，针对触摸屏</p> <p>ol.interaction.PinchZoom</p> <p>两个手指缩放地图，针对触摸屏</p> <p>ol.interaction.DragPan</p> <p>鼠标或手指拖拽平移地图</p> <p>ol.interaction.KeyboardZoom</p> <p>使用键盘 + 和 - 按键进行缩放</p> <p>ol.interaction.KeyboardPan</p> <p>使用键盘方向键平移地图</p> <p>ol.interaction.MouseWheelZoom</p> <p>鼠标滚轮缩放地图</p> <p>(2)针对矢量图层元素的交互功能</p> <p>1)选择ol.interaction.Select()</p> <p>选择矢量元素的交互功能。</p> <p>默认情况下，所选矢量元素的样式不相同，因此这种交互可以用于可视化高亮显示，以及为其他操作(如修改或输出)选择特性。</p> <p>选定的矢量元素将被添加到内部非托管图层。</p> <p>有三种方式控制矢量元素的选择：</p> <p>使用由condition定义的浏览器事件和toggle切换的add/remove以及multi选项</p> <p>一个layer过滤器</p> <p>一个使用filter选项的进一步矢量元素过滤器</p> <p>2)绘制ol.interaction.Draw()</p> <p>用于绘制特征几何图形的交互功能。</p> <p>绘制交互允许绘制几何地理要素，可选一个参数为对象，可包含参数如下：</p> <p>features：绘制的要素的目标集合；</p> <p>source：绘制的要素的目标图层源；</p> <p>snapTolerance：自动吸附完成点的像素距离，也就是说当鼠标位置距离闭合点小于该值设置的时候，会自动吸附到闭合点，默认值是 12；</p> <p>type：绘制的地理要素类型，ol.geom.GeometryType类型，包含 Point、 LineString、 Polygon、MultiPoint、MultiLineString 或者 MultiPolygon；</p> <p>minPointsPerRing：绘制一个多边形需要的点数最小值，数值类型，默认是 3；</p> <p>style：要素素描的样式；</p> <p>geometryName：绘制的地理要素的名称，string类型</p> <p>3)修改ol.interaction.Modify()</p> <p>用于修改矢量元素几何图形的交互功能。</p> <p>若想修改已添加到存在的矢量源中的矢量元素，需要使用modify选项构建修改交互动作。</p> <p>如若想修改集合中的矢量元素(比如用选择交互的集合)，需要使用features选项构建交互。该交互必须使用source或者features构建。</p> <p>默认情况下，当按下alt键时，交互允许删除顶点。想要使用不同的删除条件配置交互，请使用deleteCondition选项。</p> <p>5、控件Control</p> <p>控件是一个可见的小部件，其DOM元素位于屏幕上的固定位置。它们可以包含用户输入(按钮)，或者只是提供信息;位置是使用CSS确定的。这是一个虚基类，不负责实例化特定的控件。</p> <p>默认情况下，这些元素被放置在具有CSS类名称ol-overlaycontainer-stopevent的容器中，但是可以使用任何外部DOM元素。</p> <p>let myControl = new ol.control.Control({//定义一个控件</p> <p>element:myElement</p> <p>})</p> <p>//然后添加到地图上</p> <p>map.addControl(myControl);</p> <p>主要的属性选项有：</p> <p>element：DOM元素，元素是控件的容器元素。只有在开发自定义控件时才需要指定这一点</p> <p>render：重新呈现控件时调用的函数。这在requestAnimationFrame回调中调用</p> <p>target：DOM元素，想要控件在映射的视图端口之外呈现，需要指定目标对象</p> <p>其中包含的控件有：</p> <p>控件</p> <p>功能</p> <p>controldefaults</p> <p>地图默认包含的控件，包含缩放控件和旋转控件</p> <p>fullscreencontrol</p> <p>全屏控件，用于全屏幕查看地图</p> <p>mousepositioncontrol</p> <p>鼠标位置控件，显示鼠标所在地图位置的坐标，可以自定义投影</p> <p>overviewmapcontrol</p> <p>地图全局视图控件</p> <p>rotatecontrol</p> <p>地图旋转控件</p> <p>scalelinecontrol</p> <p>比例尺控件</p> <p>zoomcontrol</p> <p>缩放控件</p> <p>zoomslidercontrol</p> <p>缩放刻度控件</p> <p>zoomtoextentcontrol</p> <p>缩放到全局控件</p> <p>6、叠加层Overlay</p> <p>要显示在地图上方并附加到单个地图位置的元素。与控件不同的是，它们不在屏幕上的固定位置，而是绑定到地理坐标上，因此平移地图将移动 overlay ，而不是控件。</p> <p>let popup = new ol.Overlay({</p> <p>element:document.getElementById('popup'),</p> <p>...</p> <p>});</p> <p>popup.setPosition(coordinate);</p> <p>map.addOverlay(popup);</p> <p>Overlay选项</p> <p>(1)id</p> <p>设置 overlay的 id，字符串类型。</p> <p>获取id：map.getOverlayById(id)或者overlay.getId()</p> <p>(2)element</p> <p>overlay 元素，DOM元素</p> <p>获取：overlay.getElement()</p> <p>设置：overlay.setElement(element)</p> <p>(3)offset</p> <p>偏移量(以像素为单位)，用于定位 overlay ，数组类型，默认为[0, 0]：</p> <p>数组第一个元素为水平偏移，正右负左；</p> <p>数组第二个元素为垂直，正下负上；</p> <p>获取偏移值：overlay.getOffset()</p> <p>设置偏移值：overlay.setOffset(offset)</p> <p>(4)position</p> <p>地图投影中的位置。</p> <p>获取：overlay.getPosition()</p> <p>设置：overlay.setPosition(position)，如果位置未定义undefined，则覆盖被隐藏。</p> <p>(5)positioning</p> <p>定义 overlay 相对于其位置属性的实际位置，默认为top-left，还有'bottom-left', 'bottom-center', 'bottom-right', 'center-left', 'center-center', 'center-right', 'top-left','top-center', and 'top-right'.</p> <p>获取：overlay.getPositioning()</p> <p>设置：overlay.setPositioning(positioning)</p> <p>(6)autoPan</p> <p>默认为false，如果设置为true，则在调用setPosition将平移映射，以便在当前视图中 overlay 完全可见。</p> <p>(7)autoPanAnimation</p> <p>动画选项用于平移 overlay 到视图中。此动画仅在启用autoPan时使用。可以提供一个持续时间和缓动来定制动画。</p> <p>(8)stopEvent</p> <p>默认为true，是否应该停止到map视图端口的事件传播。</p> <p>如果为true，则将 overlay 放置在与控件相同的容器中(CSS class nameol-overlaycontainer-stopevent)</p> <p>如果为false，它用className属性指定的CSS类名放置在容器中。</p> <p>(9)className</p> <p>CSS class name.</p> <p>(10)autoPanMargin</p> <p>地图自动平移时，地图边缘与 overlay 的留白(空隙)，单位是像素，默认是 20像素</p> <p>7、投影Projections</p> <p>需要给所有坐标和范围提供视图投影系(默认是EPAG:3857)。</p> <p>转换投影系，使用ol.proj.transform()和ol.proj.transformExtendt进行转换</p> <p>(1)、ol.proj</p> <p>1)ol.proj.addCoordinateTransforms(source, destination, forward, inverse)</p> <p>注册坐标转换函数来转换源投影和目标投影之间的坐标。正、反函数转换坐标对;此函数将这些转换为内部使用的处理区段和坐标数组的函数</p> <p>source：源投影</p> <p>destination：目标投影</p> <p>forward：接受ol的正向变换函数(即从源投影到目标投影)。作为参数，并返回转换后的ol.Coordinate</p> <p>inverse：接受ol的逆变换函数(即从目标投影到源投影)。作为参数，并返回转换后的ol.Coordinate</p> <p>2)ol.proj.addEquivalentProjections(projections)</p> <p>注册不改变坐标的转换函数。它们允许在具有相同含义的投影之间进行转换。</p> <p>3)ol.proj.addProjection(projection)</p> <p>将投影对象添加到受支持的投影列表中，这些投影可以通过它们的SRS码进行查找。</p> <p>4)ol.proj.equivalent(projection1, projection2)</p> <p>检查两个投影是否相同，即一个投影中的每个坐标确实表示另一个投影中的相同地理点。</p> <p>5)ol.proj.fromLonLat(coordinate, opt_projection)</p> <p>将经纬度坐标转换为不同的投影</p> <p>coordinate：经纬度数组，经度在前，纬度在后</p> <p>projection：目标投影。默认是Web Mercator，即“EPSG: 3857”</p> <p>6)ol.proj.get(projectionLike)</p> <p>获取指定代码的投影对象。</p> <p>7)ol.proj.getTransform(source, destination)</p> <p>给定类似于投影的对象，搜索转换函数将坐标数组从源投影转换为目标投影。</p> <p>8)ol.proj.setProj4(proj4)</p> <p>proj4注册。如果没有显式注册，则假定proj4js将加载在全局名称空间中</p> <p>ol.proj.setProj4(proj4);</p> <p>9)ol.proj.toLonLat(coordinate, opt_projection)</p> <p>将坐标转换为经度/纬度</p> <p>coordinate：投影坐标</p> <p>projection：坐标的投影，默认是Web Mercator，即“EPSG: 3857”</p> <p>10)ol.proj.transform(coordinate, source, destination)</p> <p>将坐标从源投影转换为目标投影，这将返回一个新的坐标(并且不修改原始坐标)。</p> <p>coordinate：坐标</p> <p>source：源投影</p> <p>destination：目标投影</p> <p>11)ol.proj.transformExtent</p> <p>将范围从源投影转换为目标投影，这将返回一个新范围(并且不修改原始范围)。</p> <p>12)ol.proj.Units{string}</p> <p>投影单位：'degrees', 'ft', 'm', 'pixels', 'tile-pixels' or 'us-ft'
————————————————
版权声明：本文为CSDN博主「weixin_39594080」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_39594080/article/details/111518979</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d11e3cee.js" defer></script><script src="/assets/js/2.15dfde48.js" defer></script><script src="/assets/js/38.edd3e45b.js" defer></script>
  </body>
</html>
